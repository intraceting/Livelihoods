var __tea_iife_export__=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function t(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}function n(e){for(var n=e;n&&!t(n,"container");){if("HTML"===n.nodeName||"BODY"===n.nodeName)return e;n=n.parentElement}return n||e}function i(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")?t=e.getAttribute("data-tea-title"):e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}var o=function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some(function(e){return e.children.length>0})}return!0},r=function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n};a=+Date.now()+Number((""+Math.random()).slice(2,8));var a,c=function(e,t,n){var i=document.createElement("script");i.src=e,i.onerror=function(){n(e)},i.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(i)},s=function(){function n(n,i,a){var c=this;this.clickEvent=function(e){(function(e,n){if(window.innerHeight,window.innerWidth,1!==e.nodeType)return!1;if(!n.svg&&r(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var i=e;return!("none"===i.style.display||!t(i,"container")&&!o(i))})(e.target,c.options)&&c.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){c.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){c.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(t,n){n&&"pushState"===n&&c.eventHandel({eventType:"dom",eventName:"beat"},e({beat_type:0},t)),c.eventHandel({eventType:"dom",eventName:"page_view"},t)},this.getPageLoadEvent=function(e){c.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=a.getConfig().eventConfig,this.collect=i,this.options=n,this.beatTime=n.beat,this.statistics=!1}return n.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},n.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e&&(this.config.click&&window.document.addEventListener("click",this.clickEvent,!0),this.config.change&&window.document.addEventListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),this.config.pv&&this.collect.on("route-change",function(e){var n=e.config,i=e.name;t.getPageViewEvent(n,i)}),this.config.beat)){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",function(){t.beatEvent(t.beatTime)});var n=0,i=null;window.addEventListener("scroll",function(){clearTimeout(i),i=setTimeout(o,500),n=document.documentElement.scrollTop||document.body.scrollTop});var o=function(){(document.documentElement.scrollTop||document.body.scrollTop)==n&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}try{var r=window.performance&&window.performance.getEntriesByType("paint");if(r&&r.length)new PerformanceObserver(function(e){var n=e.getEntries(),i=n[n.length-1],o=i.renderTime||i.loadTime;t.statistics||(t.getPageLoadEvent(o),t.statistics=!0)}).observe({entryTypes:["largest-contentful-paint"]}),setTimeout(function(){t.statistics||(t.getPageLoadEvent(r[0].startTime||0),t.statistics=!0)},2e3);else this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}},n.prototype.removeListener=function(){window.document.removeEventListener("click",this.clickEvent,!0),window.document.removeEventListener("change",this.changeEvent,!0),window.document.removeEventListener("submit",this.submitEvent,!0)},n.prototype.beatEvent=function(e){var t,n=this;try{var i;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(i=setInterval(function(){n.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})},e)),t=function(){n.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),n.beatTime&&clearInterval(i)},navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",t,!1):window.addEventListener("beforeunload",t,!1)}catch(e){}},n}(),d={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},u=function(){function e(e){this.config=e}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();function l(e){for(var n=[];null!==e.parentElement;)n.push(e),e=e.parentElement;var i=[],o=[];return n.forEach(function(e){var n=function(e){if(null===e)return{str:"",index:0};var n=0,i=e.parentElement;if(i)for(var o=i.children,r=0;r<o.length&&o[r]!==e;r++)o[r].nodeName===e.nodeName&&n++;return{str:[e.nodeName.toLowerCase(),t(e,"list")?"[]":""].join(""),index:n}}(e),r=n.str,a=n.index;i.unshift(r),o.unshift(a)}),{element_path:"/"+i.join("/"),positions:o}}function p(e,t,o){var r={element_path:"",positions:[],texts:[]},a=function(e){if(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return{left:t.left,top:t.top,element_width:n,element_height:i}}}(t),c=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,i=e.clientY,o=t.left,r=t.top,a=n-o>=0?n-o:0,c=i-r>=0?i-r:0;return{touch_x:Math.floor(a),touch_y:Math.floor(c)}}(e,a),s=a.element_width,d=a.element_height,u=c.touch_x,p=c.touch_y,h=l(t),v=h.element_path,g=h.positions,f=function(e){var t=n(e),o=[];return function e(t){var n=i(t);if(n&&-1===o.indexOf(n)&&o.push(n),t.childNodes.length>0)for(var r=t.childNodes,a=0;a<r.length;a++)8!==r[a].nodeType&&e(r[a])}(t),o}(t),m=window.performance.timing.navigationStart,_=Date.now()-m,w=g.map(function(e){return""+e}),y=null;window.TEAVisualEditor.getOriginXpath&&(y=window.TEAVisualEditor.getOriginXpath({xpath:v,positions:w})),r.element_path=y&&y.xpath||v,r.positions=y&&y.positions||w,o&&!o.text&&(r.texts=f,r.element_title=function(e){var t=n(e),o="";return function e(t){var n=i(t);if(n&&(o+=n),t.childNodes.length>0)for(var r=t.childNodes,a=0;a<r.length;a++)3===r[a].nodeType&&e(r[a])}(t),o}(t)),r.element_id=t.getAttribute("id")||"",r.element_class_name=t.getAttribute("class")||"",r.element_type=t.nodeType,r.element_width=Math.floor(s),r.element_height=Math.floor(d),r.touch_x=u,r.touch_y=p,r.page_manual_key="",r.elememt_manual_key="",r.since_page_start_ms=_,r.page_start_ms=m,r.page_path=location.pathname,r.page_host=location.host;var E=n(t);return"A"===E.tagName&&(r.href=E.getAttribute("href")),"IMG"===t.tagName&&(r.src=t.getAttribute("src")),r}function h(t,n,i,o){return e({event:t},p(n,i,o),{is_html:1,page_key:window.location.href,page_title:document.title})}var v=function(){function t(e,t){this.ignore={text:!1},this.initConfig=e,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics"},t&&!1===t.text&&(this.ignore.text=!0)}return t.prototype.handleEvent=function(t,n){try{if(function(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}(t.target))return null;var i="bav2b_click";switch(n){case"click":return h(i=this.eventName.click,t,t.target,this.ignore);case"change":return e({},h(i="bav2b_change",t,t.target),function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}}(i,t.target));case"submit":return h(i="bav2b_submit",t,t.target)}}catch(e){return console.error(e),null}},t.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:"",e.refer_page_title=n?n.page_title:""}else e.refer_page_duration_ms="",e.refer_page_title="";e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("page event error "+JSON.stringify(e))}return e},t.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,i=window.performance.timing,o=i.loadEventEnd-i.navigationStart;t.page_init_cost_ms=parseInt(n||(o>0?o:0)),t.page_start_ms=i.navigationStart}catch(e){console.log("page_statistics event error "+JSON.stringify(e))}return t},t.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("beat event error "+JSON.stringify(e))}return e},t}(),g=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,i=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(i,t):this.collect.event(i,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),f={},m=[],_=function(e){e.length&&e.forEach(function(e){m.push(e)})};function w(e,t,n,i){var o=e&&e.source||window.opener||window.parent,r=e&&e.origin||i||"*",a={type:t,payload:n};o.postMessage(JSON.stringify(a),r)}function y(e,t){f[e]=f[e]||[],f[e].push(t)}function E(e){if(m.some(function(e){return"*"===e})||m.some(function(t){return e.origin.indexOf(t)>-1})){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){t=void 0}if(!t)return;var n=t.type,i=t.payload;f[n]&&f[n].forEach(function(t){"function"==typeof t&&t(e,i)})}}var b,T=(function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function o(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in r)r[s]&&(c+="; "+s,!0!==r[s]&&(c+="="+r[s].split(";")[0]));return document.cookie=t+"="+n+c}}function a(e,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var c=r[a].split("="),s=c.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var d=t(c[0]);if(s=(i.read||i)(s,d)||t(s),n)try{s=JSON.parse(s)}catch(e){}if(o[d]=s,e===d)break}catch(e){}}return e?o[e]:o}}return o.set=r,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){r(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})},e.exports=n()}(b={exports:{}},b.exports),b.exports),N="_TEA_VE_OPEN",k="_TEA_VE_APIHOST",A="lang",x="_VISUAL_EDITOR_V",S="_VISUAL_EDITOR_U";function L(){try{var e=window.TEAVisualEditor.lang=window.TEAVisualEditor.lang||T.get(A),t=window.TEAVisualEditor.__editor_ajax_domain=window.TEAVisualEditor.__editor_ajax_domain||T.get(k),n=window.TEAVisualEditor.__editor_verison=window.TEAVisualEditor.__editor_verison||T.get(x),i=window.TEAVisualEditor.__editor_url=window.TEAVisualEditor.__editor_url||T.get(S),o=+new Date,r=new Date(o+18e5);T.set(N,"1",{expires:r}),T.set(k,t,{expires:r}),T.set(S,i,{expires:r}),T.set(A,e,{expires:r}),T.set(x,n||"",{expires:r})}catch(e){console.log("set cookie err")}}var O="5.0.23",C="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-editor-rangers.js",V="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/heatmap-core";window.TEAVisualEditor=window.TEAVisualEditor||{};var H=!1;function I(e){var t=e.event,n=e.editorUrl,i=e.autoTrackInstance;H||(H=!0,c(n,function(){w(t,"editorScriptloadSuccess"),i.destroy()},function(){t&&w(t,"editorScriptloadError"),H=!1}))}function j(t,n){var i="",o=C+"?query="+Date.now();window.TEAVisualEditor.appId=n.app_id;var r,a,c=n.channel_domain,s="";if(_(["*"]),c){var d,u="";try{var l=window.performance.getEntriesByType("resource");if(l&&l.length&&(l.forEach(function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(u=e.name)}),u||document.currentScript&&(u=document.currentScript.src),u&&(d=u.split("/"))&&d.length)){s="https:/";for(var p=2;p<d.length&&p!==d.length-1;p++)s=s+"/"+d[p];if(s&&s.indexOf("/5.0")){var h=s.split("/5.0");s=h[0]||s}}}catch(e){}}if(r=O,delete(a=e({},n)).filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",copyConfig:a,version:r},"*"),window.addEventListener("message",E,!1),"1"===T.get(N)){var v=function(){var e=T.get(k);try{e=JSON.parse(e)}catch(e){}return e}(),g="";v&&(window.TEAVisualEditor.__editor_ajax_domain=v,g=T.get(S)),I({event:null,editorUrl:g||o,autoTrackInstance:t}),L()}else try{y("tea:openVisualEditor",function(e){var n=e.data;if("string"==typeof e.data)try{n=JSON.parse(e.data)}catch(e){n=void 0}if(n){var r=n.referrer,a=n.lang;if(r&&(window.TEAVisualEditor.__editor_ajax_domain=r),i=o,c){var d=n.version;i=s?""+s+(d?"/visual-editor-rangers-v"+d:"/visual-editor-rangers-v1.0.0")+".js":o,window.TEAVisualEditor.__editor_verison=d}window.TEAVisualEditor.__editor_url=i,window.TEAVisualEditor.lang=a,I({event:e,editorUrl:i,autoTrackInstance:t}),L()}}),window.TEAVisualEditor.openAutotrackEditor=function(){I({event:null,editorUrl:window.TEAVisualEditor.__editor_url,autoTrackInstance:t})}}catch(e){console.log("receive message error")}try{y("tea:openHeatMapCore",function(e){I({event:e,editorUrl:V+".js?query="+Date.now(),autoTrackInstance:t})})}catch(e){console.log("openHeatMapCore error")}}var P={hashTag:!1,impr:!1},D=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady)}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==typeof t?t:{},t=Object.assign(P,t),this.destroyed=!1,this.options=t,this.Config=new u(d),this.Listener=new s(t,this.collect,this.Config),this.EventHandle=new v(this.config,t),this.Request=new g(this.collect),this.autoTrackStart=!0,this.init(),j(this,this.config)},e.prototype.init=function(){this.Listener.init(this.handle.bind(this))},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"change"===n||"submit"===n){var i=this.EventHandle.handleEvent(t,n);null!==i&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},i)}else if("page_view"===n||"page_statistics"===n){var o=void 0;o="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},o)}else if("beat"===n){var r=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},r)}}catch(e){console.log("handel dom event error "+JSON.stringify(e))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}();try{var U="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null;U&&(U.LogAutoTrack=function(e,t){(new D).apply(e,t)})}catch(e){}return D}();
